import{$b as nt,A as ce,Aa as s,Ab as ye,B as Ve,Ba as he,C as He,Ca as T,Cb as W,Da as D,Db as it,Ea as k,F as Be,Fa as A,Fb as U,G as C,Gb as Y,H as B,Ha as b,Hb as Ee,J as o,Ja as f,Ka as Ke,L as _,La as Xe,M as S,N as $e,Na as Qe,Oa as Ze,Pa as qe,T as O,U as je,Ua as $,Va as L,W as de,Wa as Je,Xa as d,Y as We,Ya as I,Za as ge,_ as Ye,a as X,aa as a,b as Q,c as oe,cb as et,d as H,da as Ge,e as Me,f as Ue,g as ae,i as se,ia as h,ic as te,j as Z,ja as P,ka as ue,kc as ot,l as le,lb as be,lc as at,m as ze,mb as ee,nb as M,oa as me,p as Fe,pa as pe,ta as fe,ua as m,ub as j,va as p,vb as tt,wa as q,xa as J,xb as rt,ya as w,za as c}from"./chunk-U6ZFVSUW.js";var N=class t{http=o(rt);playlistsCache$=new ae(null);getPlaylists(){return this.playlistsCache$.value?this.playlistsCache$.asObservable():this.loadPlaylists()}getPlaylistById(i){return this.getPlaylists().pipe(le(e=>e.find(r=>r.id===i)))}reload(){return this.loadPlaylists()}loadPlaylists(){return this.http.get("assets/playlists.json").pipe(He(i=>this.playlistsCache$.next(i)))}static \u0275fac=function(e){return new(e||t)};static \u0275prov=Be({token:t,factory:t.\u0275fac,providedIn:"root"})};var Rt=["*"];var Ot=new B("MAT_CARD_CONFIG"),st=(()=>{class t{appearance;constructor(){let e=o(Ot,{optional:!0});this.appearance=e?.appearance||"raised"}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=h({type:t,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:8,hostBindings:function(r,n){r&2&&L("mat-mdc-card-outlined",n.appearance==="outlined")("mdc-card--outlined",n.appearance==="outlined")("mat-mdc-card-filled",n.appearance==="filled")("mdc-card--filled",n.appearance==="filled")},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:Rt,decls:1,vars:0,template:function(r,n){r&1&&(Ke(),Xe(0))},styles:[`.mat-mdc-card{display:flex;flex-direction:column;box-sizing:border-box;position:relative;border-style:solid;border-width:0;background-color:var(--mat-card-elevated-container-color, var(--mat-sys-surface-container-low));border-color:var(--mat-card-elevated-container-color, var(--mat-sys-surface-container-low));border-radius:var(--mat-card-elevated-container-shape, var(--mat-sys-corner-medium));box-shadow:var(--mat-card-elevated-container-elevation, var(--mat-sys-level1))}.mat-mdc-card::after{position:absolute;top:0;left:0;width:100%;height:100%;border:solid 1px rgba(0,0,0,0);content:"";display:block;pointer-events:none;box-sizing:border-box;border-radius:var(--mat-card-elevated-container-shape, var(--mat-sys-corner-medium))}.mat-mdc-card-outlined{background-color:var(--mat-card-outlined-container-color, var(--mat-sys-surface));border-radius:var(--mat-card-outlined-container-shape, var(--mat-sys-corner-medium));border-width:var(--mat-card-outlined-outline-width, 1px);border-color:var(--mat-card-outlined-outline-color, var(--mat-sys-outline-variant));box-shadow:var(--mat-card-outlined-container-elevation, var(--mat-sys-level0))}.mat-mdc-card-outlined::after{border:none}.mat-mdc-card-filled{background-color:var(--mat-card-filled-container-color, var(--mat-sys-surface-container-highest));border-radius:var(--mat-card-filled-container-shape, var(--mat-sys-corner-medium));box-shadow:var(--mat-card-filled-container-elevation, var(--mat-sys-level0))}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mat-mdc-card-actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font, var(--mat-sys-title-large-font));line-height:var(--mat-card-title-text-line-height, var(--mat-sys-title-large-line-height));font-size:var(--mat-card-title-text-size, var(--mat-sys-title-large-size));letter-spacing:var(--mat-card-title-text-tracking, var(--mat-sys-title-large-tracking));font-weight:var(--mat-card-title-text-weight, var(--mat-sys-title-large-weight))}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color, var(--mat-sys-on-surface));font-family:var(--mat-card-subtitle-text-font, var(--mat-sys-title-medium-font));line-height:var(--mat-card-subtitle-text-line-height, var(--mat-sys-title-medium-line-height));font-size:var(--mat-card-subtitle-text-size, var(--mat-sys-title-medium-size));letter-spacing:var(--mat-card-subtitle-text-tracking, var(--mat-sys-title-medium-tracking));font-weight:var(--mat-card-subtitle-text-weight, var(--mat-sys-title-medium-weight))}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}
`],encapsulation:2,changeDetection:0})}return t})(),lt=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=ue({type:t,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-mdc-card-title"]})}return t})();var ct=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=ue({type:t,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]})}return t})();var dt=(()=>{class t{align="start";static \u0275fac=function(r){return new(r||t)};static \u0275dir=ue({type:t,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-mdc-card-actions","mdc-card__actions"],hostVars:2,hostBindings:function(r,n){r&2&&L("mat-mdc-card-actions-align-end",n.align==="end")},inputs:{align:"align"},exportAs:["matCardActions"]})}return t})();var ut=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=P({type:t});static \u0275inj=C({imports:[te,te]})}return t})();function kt(t,i){t&1&&k(0,"div",2)}var Lt=new B("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");var pt=(()=>{class t{_elementRef=o(de);_ngZone=o(pe);_changeDetectorRef=o(be);_renderer=o(Ge);_cleanupTransitionEnd;constructor(){let e=nt(),r=o(Lt,{optional:!0});this._isNoopAnimation=e==="di-disabled",e==="reduced-motion"&&this._elementRef.nativeElement.classList.add("mat-progress-bar-reduced-motion"),r&&(r.color&&(this.color=this._defaultColor=r.color),this.mode=r.mode||this.mode)}_isNoopAnimation;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;_defaultColor="primary";get value(){return this._value}set value(e){this._value=mt(e||0),this._changeDetectorRef.markForCheck()}_value=0;get bufferValue(){return this._bufferValue||0}set bufferValue(e){this._bufferValue=mt(e||0),this._changeDetectorRef.markForCheck()}_bufferValue=0;animationEnd=new me;get mode(){return this._mode}set mode(e){this._mode=e,this._changeDetectorRef.markForCheck()}_mode="determinate";ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._cleanupTransitionEnd=this._renderer.listen(this._elementRef.nativeElement,"transitionend",this._transitionendHandler)})}ngOnDestroy(){this._cleanupTransitionEnd?.()}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${this.mode==="buffer"?this.bufferValue:100}%`}_isIndeterminate(){return this.mode==="indeterminate"||this.mode==="query"}_transitionendHandler=e=>{this.animationEnd.observers.length===0||!e.target||!e.target.classList.contains("mdc-linear-progress__primary-bar")||(this.mode==="determinate"||this.mode==="buffer")&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))};static \u0275fac=function(r){return new(r||t)};static \u0275cmp=h({type:t,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:10,hostBindings:function(r,n){r&2&&(fe("aria-valuenow",n._isIndeterminate()?null:n.value)("mode",n.mode),Je("mat-"+n.color),L("_mat-animation-noopable",n._isNoopAnimation)("mdc-linear-progress--animation-ready",!n._isNoopAnimation)("mdc-linear-progress--indeterminate",n._isIndeterminate()))},inputs:{color:"color",value:[2,"value","value",M],bufferValue:[2,"bufferValue","bufferValue",M],mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],decls:7,vars:5,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(r,n){r&1&&(T(0,"div",0),k(1,"div",1),m(2,kt,1,0,"div",2),D(),T(3,"div",3),k(4,"span",4),D(),T(5,"div",5),k(6,"span",4),D()),r&2&&(a(),$("flex-basis",n._getBufferBarFlexBasis()),a(),p(n.mode==="buffer"?2:-1),a(),$("transform",n._getPrimaryBarTransform()))},styles:[`.mat-mdc-progress-bar{--mat-progress-bar-animation-multiplier: 1;display:block;text-align:start}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}.mat-progress-bar-reduced-motion{--mat-progress-bar-animation-multiplier: 2}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:max(var(--mat-progress-bar-track-height, 4px),var(--mat-progress-bar-active-indicator-height, 4px))}@media(forced-colors: active){.mdc-linear-progress{outline-color:CanvasText}}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:var(--mat-progress-bar-active-indicator-height, 4px)}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}[dir=rtl] .mdc-linear-progress__bar{right:0;transform-origin:center right}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid;border-color:var(--mat-progress-bar-active-indicator-color, var(--mat-sys-primary));border-top-width:var(--mat-progress-bar-active-indicator-height, 4px)}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden;height:var(--mat-progress-bar-track-height, 4px);border-radius:var(--mat-progress-bar-track-shape, var(--mat-sys-corner-none))}.mdc-linear-progress__buffer-dots{background-image:radial-gradient(circle, var(--mat-progress-bar-track-color, var(--mat-sys-surface-variant)) calc(var(--mat-progress-bar-track-height, 4px) / 2), transparent 0);background-repeat:repeat-x;background-size:calc(calc(var(--mat-progress-bar-track-height, 4px) / 2)*5);background-position:left;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering calc(250ms*var(--mat-progress-bar-animation-multiplier)) infinite linear}@media(forced-colors: active){.mdc-linear-progress__buffer-dots{background-color:ButtonBorder}}[dir=rtl] .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse calc(250ms*var(--mat-progress-bar-animation-multiplier)) infinite linear;transform:rotate(0)}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);background-color:var(--mat-progress-bar-track-color, var(--mat-sys-surface-variant))}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate calc(2s*var(--mat-progress-bar-animation-multiplier)) infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale calc(2s*var(--mat-progress-bar-animation-multiplier)) infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate calc(2s*var(--mat-progress-bar-animation-multiplier)) infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale calc(2s*var(--mat-progress-bar-animation-multiplier)) infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mat-progress-bar-track-height, 4px) * -2.5))}}@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(-83.67142%)}100%{transform:translateX(-200.611057%)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(-37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(-84.386165%)}100%{transform:translateX(-160.277782%)}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}
`],encapsulation:2,changeDetection:0})}return t})();function mt(t,i=0,e=100){return Math.max(i,Math.min(e,t))}var ft=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=P({type:t});static \u0275inj=C({imports:[te]})}return t})();var Ut=(t,i)=>i.id;function zt(t,i){t&1&&d(0," Carregando playlists... ")}function Ft(t,i){t&1&&(c(0,"p"),d(1,"Nenhuma playlist dispon\xEDvel"),s())}function Vt(t,i){if(t&1){let e=A();c(0,"mat-card",2)(1,"mat-card-title"),d(2),s(),c(3,"mat-card-content")(4,"p"),d(5),s(),he(6,"mat-progress-bar",3),c(7,"p",4),d(8),s()(),c(9,"mat-card-actions")(10,"button",5),b("click",function(){let n=_(e).$implicit,l=f(2);return S(l.openPlaylist(n))}),d(11,"Abrir"),s()()()}if(t&2){let e=i.$implicit;a(2),I(e.title),a(3),I(e.description||"\u2014"),a(),w("value",e.progress||0),a(2),ge("",e.progress??0,"% visto")}}function Ht(t,i){if(t&1&&(c(0,"div",1),q(1,Vt,12,4,"mat-card",2,Ut),s()),t&2){let e=f();a(),J(e.playlists)}}function Bt(t,i){t&1&&(c(0,"p"),d(1,"Selecione ou crie um perfil para ver o progresso por playlist."),s())}var _e=class t{dataService=o(N);profileService=o(Ee);persistenceService=o(Y);router=o(W);playlists=[];loading=!0;hasProfiles=!1;subs=new H;ngOnInit(){let i=this.dataService.getPlaylists(),e=this.profileService.getActiveProfile();this.subs.add(ze([i,e]).pipe(ce(([r,n])=>!r||r.length===0?(this.playlists=[],this.loading=!1,Z(null)):n?(this.hasProfiles=!0,se(this.persistenceService.getWatchedVideos(n.id)).pipe(le(l=>{this.playlists=r.map(x=>{let E=x.modules?.reduce((K,Ae)=>K+(Ae.lessons?.length||0),0)||0,G=x.modules?.flatMap(K=>K.lessons?.map(Ae=>Ae.id)||[]).filter(K=>l.includes(K))||[],Nt=E===0?0:Math.round(G.length/E*100);return Q(X({},x),{progress:Nt})}),this.loading=!1}))):(this.playlists=r.map(l=>Q(X({},l),{progress:0})),this.loading=!1,this.hasProfiles=!1,Z(null)))).subscribe())}openPlaylist(i){this.router.navigate(["/playlists",i.id])}ngOnDestroy(){this.subs.unsubscribe()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=h({type:t,selectors:[["app-playlist-list"]],decls:5,vars:4,consts:[[1,"playlist-list"],[1,"grid"],[1,"card"],["mode","determinate",3,"value"],[1,"progress-label"],["mat-button","",3,"click"]],template:function(e,r){e&1&&(c(0,"div",0),m(1,zt,1,0),m(2,Ft,2,0,"p"),m(3,Ht,3,0,"div",1),m(4,Bt,2,0,"p"),s()),e&2&&(a(),p(r.loading?1:-1),a(),p(!r.loading&&r.playlists.length===0?2:-1),a(),p(!r.loading&&r.playlists.length>0?3:-1),a(),p(!r.loading&&!r.hasProfiles?4:-1))},dependencies:[j,U,ut,st,dt,ct,lt,at,ot,ft,pt],styles:[".playlist-list[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:16px}.playlist-list[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{display:flex;flex-direction:column}.playlist-list[_ngcontent-%COMP%]   .progress-label[_ngcontent-%COMP%]{font-size:.9rem;margin-top:4px}"]})};var $t=(t,i)=>["/playlists",t,"videos",i],jt=(t,i)=>i.title,Wt=(t,i)=>i.id;function Yt(t,i){t&1&&d(0," Carregando playlist... ")}function Gt(t,i){t&1&&(c(0,"p"),d(1,"Playlist n\xE3o encontrada."),s())}function Kt(t,i){if(t&1){let e=A();c(0,"li")(1,"label")(2,"input",2),b("change",function(){let n=_(e).$implicit,l=f(3);return S(l.toggleWatched(n.id))}),s(),d(3),s(),c(4,"button",3),d(5,"Assistir"),s()()}if(t&2){let e,r=i.$implicit,n=f(3);a(2),w("checked",n.isWatched(r.id)),a(),ge(" ",r.title," "),a(),w("routerLink",et(3,$t,(e=n.playlist())==null?null:e.id,r.id))}}function Xt(t,i){if(t&1&&(c(0,"h3"),d(1),s(),c(2,"ul"),q(3,Kt,6,6,"li",null,Wt),s()),t&2){let e=i.$implicit;a(),I(e.title),a(2),J(e.lessons)}}function Qt(t,i){if(t&1&&(c(0,"h2"),d(1),s(),q(2,Xt,5,1,null,null,jt)),t&2){let e,r,n=f();a(),I((e=n.playlist())==null?null:e.title),a(),J((r=n.playlist())==null?null:r.modules)}}var Se=class t{route=o(ye);dataService=o(N);persistence=o(Y);router=o(W);playlist=O(void 0);watched=O([]);loading=O(!0);subs=new H;ngOnInit(){let i=this.route.snapshot.paramMap.get("id")||void 0;if(!i){this.loading.set(!1);return}this.subs.add(this.dataService.getPlaylistById(i).subscribe(e=>{this.playlist.set(e),e?se(this.persistence.getWatchedVideos(1)).subscribe(r=>{this.watched.set(r),this.loading.set(!1)}):this.loading.set(!1)}))}isWatched(i){return this.watched().includes(i)}trackByModule(i,e){return e?.id}trackByLesson(i,e){return e?.id}toggleWatched(i){return oe(this,null,function*(){this.isWatched(i)?(yield this.persistence.markAsUnwatched(1,i),this.watched.update(r=>r.filter(n=>n!==i))):(yield this.persistence.markAsWatched(1,i),this.watched.update(r=>[...r,i]))})}goBack(){this.router.navigate(["/playlists"])}ngOnDestroy(){this.subs.unsubscribe()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=h({type:t,selectors:[["app-playlist-detail"]],decls:6,vars:3,consts:[[1,"playlist-detail"],[3,"click"],["type","checkbox",3,"change","checked"],[3,"routerLink"]],template:function(e,r){e&1&&(c(0,"div",0)(1,"button",1),b("click",function(){return r.goBack()}),d(2,"Voltar"),s(),m(3,Yt,1,0),m(4,Gt,2,0,"p"),m(5,Qt,4,1),s()),e&2&&(a(3),p(r.loading()?3:-1),a(),p(!r.loading()&&!r.playlist()?4:-1),a(),p(r.playlist()?5:-1))},dependencies:[j,U,it],styles:[".playlist-detail[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:8px}.playlist-detail[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:12px}"]})};var R={};function we(t){return Object.isFrozen(t)&&Object.isFrozen(t.raw)}function ve(t){return t.toString().indexOf("`")===-1}var Bi=ve(t=>t``)||ve(t=>t`\0`)||ve(t=>t`\n`)||ve(t=>t`\u0000`),$i=we``&&we`\0`&&we`\n`&&we`\u0000`;var Zt="google#safe",gt=Zt,Ne=globalThis.trustedTypes,bt=Ne,Ie;function qt(){let t=null;if(gt===""||!bt)return t;try{let i=e=>e;t=bt.createPolicy(gt,{createHTML:i,createScript:i,createScriptURL:i})}catch{}return t}function xe(){return Ie===void 0&&(Ie=qt()),Ie}function v(t){return{valueOf:t}.valueOf()}var re=class{constructor(i,e){this.privateDoNotAccessOrElseWrappedResourceUrl=e}toString(){return this.privateDoNotAccessOrElseWrappedResourceUrl+""}},Jt=re;function er(t){return new Jt(R,t)}function Re(t){let i=t,e=xe();return er(e?e.createScriptURL(i):i)}function Oe(t){return t instanceof re}function g(t){if(Oe(t))return t.privateDoNotAccessOrElseWrappedResourceUrl;{let i="";throw new Error(i)}}var nr="display:inline-block;clip-path:inset(0);overflow:hidden;vertical-align:top;text-decoration:inherit",or=`:host{${nr}}`;var ne=class{constructor(i,e,r,n,l){this.allowedElements=i,this.elementPolicies=e,this.allowedGlobalAttributes=r,this.globalAttributePolicies=n,this.globallyAllowedAttributePrefixes=l}isAllowedElement(i){return i!=="FORM"&&(this.allowedElements.has(i)||this.elementPolicies.has(i))}getAttributePolicy(i,e){let r=this.elementPolicies.get(e);if(r?.has(i))return r.get(i);if(this.allowedGlobalAttributes.has(i))return{policyAction:u.KEEP};let n=this.globalAttributePolicies.get(i);return n||(this.globallyAllowedAttributePrefixes&&[...this.globallyAllowedAttributePrefixes].some(l=>i.indexOf(l)===0)?{policyAction:u.KEEP}:{policyAction:u.DROP})}},u=(function(t){return t[t.DROP=0]="DROP",t[t.KEEP=1]="KEEP",t[t.KEEP_AND_SANITIZE_URL=2]="KEEP_AND_SANITIZE_URL",t[t.KEEP_AND_NORMALIZE=3]="KEEP_AND_NORMALIZE",t[t.KEEP_AND_SANITIZE_STYLE=4]="KEEP_AND_SANITIZE_STYLE",t[t.KEEP_AND_USE_RESOURCE_URL_POLICY=5]="KEEP_AND_USE_RESOURCE_URL_POLICY",t[t.KEEP_AND_USE_RESOURCE_URL_POLICY_FOR_SRCSET=6]="KEEP_AND_USE_RESOURCE_URL_POLICY_FOR_SRCSET",t})(u||{});var sr=["ARTICLE","SECTION","NAV","ASIDE","H1","H2","H3","H4","H5","H6","HEADER","FOOTER","ADDRESS","P","HR","PRE","BLOCKQUOTE","OL","UL","LH","LI","DL","DT","DD","FIGURE","FIGCAPTION","MAIN","DIV","EM","STRONG","SMALL","S","CITE","Q","DFN","ABBR","RUBY","RB","RT","RTC","RP","DATA","TIME","CODE","VAR","SAMP","KBD","SUB","SUP","I","B","U","MARK","BDI","BDO","SPAN","BR","WBR","NOBR","INS","DEL","PICTURE","PARAM","TRACK","MAP","TABLE","CAPTION","COLGROUP","COL","TBODY","THEAD","TFOOT","TR","TD","TH","SELECT","DATALIST","OPTGROUP","OPTION","OUTPUT","PROGRESS","METER","FIELDSET","LEGEND","DETAILS","SUMMARY","MENU","DIALOG","SLOT","CANVAS","FONT","CENTER","ACRONYM","BASEFONT","BIG","DIR","HGROUP","STRIKE","TT"],lr=[["A",new Map([["href",{policyAction:u.KEEP_AND_SANITIZE_URL}]])],["AREA",new Map([["href",{policyAction:u.KEEP_AND_SANITIZE_URL}]])],["LINK",new Map([["href",{policyAction:u.KEEP_AND_USE_RESOURCE_URL_POLICY,conditions:new Map([["rel",new Set(["alternate","author","bookmark","canonical","cite","help","icon","license","next","prefetch","dns-prefetch","prerender","preconnect","preload","prev","search","subresource"])]])}]])],["SOURCE",new Map([["src",{policyAction:u.KEEP_AND_USE_RESOURCE_URL_POLICY}],["srcset",{policyAction:u.KEEP_AND_USE_RESOURCE_URL_POLICY_FOR_SRCSET}]])],["IMG",new Map([["src",{policyAction:u.KEEP_AND_USE_RESOURCE_URL_POLICY}],["srcset",{policyAction:u.KEEP_AND_USE_RESOURCE_URL_POLICY_FOR_SRCSET}]])],["VIDEO",new Map([["src",{policyAction:u.KEEP_AND_USE_RESOURCE_URL_POLICY}]])],["AUDIO",new Map([["src",{policyAction:u.KEEP_AND_USE_RESOURCE_URL_POLICY}]])]],cr=["title","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-current","aria-disabled","aria-dropeffect","aria-expanded","aria-haspopup","aria-hidden","aria-invalid","aria-label","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","alt","align","autocapitalize","autocomplete","autocorrect","autofocus","autoplay","bgcolor","border","cellpadding","cellspacing","checked","cite","color","cols","colspan","controls","controlslist","datetime","disabled","download","draggable","enctype","face","formenctype","frameborder","height","hreflang","hidden","ismap","label","lang","loop","max","maxlength","media","minlength","min","multiple","muted","nonce","open","placeholder","poster","preload","rel","required","reversed","role","rows","rowspan","selected","shape","size","sizes","slot","span","spellcheck","start","step","summary","translate","type","valign","value","width","wrap","itemscope","itemtype","itemid","itemprop","itemref"],dr=[["dir",{policyAction:u.KEEP_AND_NORMALIZE,conditions:v(()=>new Map([["dir",new Set(["auto","ltr","rtl"])]]))}],["async",{policyAction:u.KEEP_AND_NORMALIZE,conditions:v(()=>new Map([["async",new Set(["async"])]]))}],["loading",{policyAction:u.KEEP_AND_NORMALIZE,conditions:v(()=>new Map([["loading",new Set(["eager","lazy"])]]))}],["target",{policyAction:u.KEEP_AND_NORMALIZE,conditions:v(()=>new Map([["target",new Set(["_self","_blank"])]]))}]],wt=new ne(new Set(sr),new Map(lr),new Set(cr),new Map(dr),void 0);function De(t,...i){if(i.length===0)return Re(t[0]);let e=t[0].toLowerCase(),r=t[0];for(let n=0;n<i.length;n++)r+=encodeURIComponent(i[n])+t[n+1];return Re(r)}function ke(t){return fr("script",t)}function fr(t,i=document){var e;let r=(e=i.querySelector)===null||e===void 0?void 0:e.call(i,`${t}[nonce]`);return r==null?"":r.nonce||r.getAttribute("nonce")||""}function hr(t){let i=ke(t.ownerDocument);i&&t.setAttribute("nonce",i)}function Pe(t,i,e){t.src=g(i),!e?.omitNonce&&hr(t)}var Tr=["youtubeContainer"];function Ar(t,i){if(t&1){let e=A();c(0,"youtube-player-placeholder",2),b("click",function(){_(e);let n=f();return S(n._load(!0))}),s()}if(t&2){let e=f();w("videoId",e.videoId)("width",e.width)("height",e.height)("isLoading",e._isLoading)("buttonLabel",e.placeholderButtonLabel)("quality",e.placeholderImageQuality)}}var Ir=(()=>{class t{videoId;width;height;isLoading;buttonLabel;quality;_getBackgroundImage(){let e;return this.quality==="low"?e=`https://i.ytimg.com/vi/${this.videoId}/hqdefault.jpg`:this.quality==="high"?e=`https://i.ytimg.com/vi/${this.videoId}/maxresdefault.jpg`:e=`https://i.ytimg.com/vi_webp/${this.videoId}/sddefault.webp`,`url(${e})`}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=h({type:t,selectors:[["youtube-player-placeholder"]],hostAttrs:[1,"youtube-player-placeholder"],hostVars:8,hostBindings:function(r,n){r&2&&($("background-image",n._getBackgroundImage())("width",n.width,"px")("height",n.height,"px"),L("youtube-player-placeholder-loading",n.isLoading))},inputs:{videoId:"videoId",width:"width",height:"height",isLoading:"isLoading",buttonLabel:"buttonLabel",quality:"quality"},decls:4,vars:1,consts:[["type","button",1,"youtube-player-placeholder-button"],["height","100%","version","1.1","viewBox","0 0 68 48","focusable","false","aria-hidden","true"],["d","M66.52,7.74c-0.78-2.93-2.49-5.41-5.42-6.19C55.79,.13,34,0,34,0S12.21,.13,6.9,1.55 C3.97,2.33,2.27,4.81,1.48,7.74C0.06,13.05,0,24,0,24s0.06,10.95,1.48,16.26c0.78,2.93,2.49,5.41,5.42,6.19 C12.21,47.87,34,48,34,48s21.79-0.13,27.1-1.55c2.93-0.78,4.64-3.26,5.42-6.19C67.94,34.95,68,24,68,24S67.94,13.05,66.52,7.74z","fill","#f00"],["d","M 45,24 27,14 27,34","fill","#fff"]],template:function(r,n){r&1&&(T(0,"button",0),$e(),T(1,"svg",1),k(2,"path",2)(3,"path",3),D()()),r&2&&fe("aria-label",n.buttonLabel)},styles:[`.youtube-player-placeholder{display:flex;align-items:center;justify-content:center;width:100%;overflow:hidden;cursor:pointer;background-color:#000;background-position:center center;background-size:cover;transition:box-shadow 300ms ease;box-shadow:inset 0 120px 90px -90px rgba(0,0,0,.8)}:fullscreen .youtube-player-placeholder{min-width:100vw;min-height:100vh}.youtube-player-placeholder-button{transition:opacity 300ms ease;-moz-appearance:none;-webkit-appearance:none;background:none;border:none;padding:0;display:flex}.youtube-player-placeholder-button svg{width:68px;height:48px}.youtube-player-placeholder-loading{box-shadow:none}.youtube-player-placeholder-loading .youtube-player-placeholder-button{opacity:0}
`],encapsulation:2,changeDetection:0})}return t})(),Nr=new B("YOUTUBE_PLAYER_CONFIG"),vt=640,xt=390;function Ct(t){return t==null?t:M(t,0)}var y=(function(t){return t[t.UNSTARTED=-1]="UNSTARTED",t[t.ENDED=0]="ENDED",t[t.PLAYING=1]="PLAYING",t[t.PAUSED=2]="PAUSED",t[t.BUFFERING=3]="BUFFERING",t[t.CUED=5]="CUED",t})(y||{}),Pt=(()=>{class t{_ngZone=o(pe);_nonce=o(Ye,{optional:!0});_changeDetectorRef=o(be);_elementRef=o(de);_player;_pendingPlayer;_existingApiReadyCallback;_pendingPlayerState;_destroyed=new Ue;_playerChanges=new ae(void 0);_isLoading=!1;_hasPlaceholder=!0;_isBrowser;videoId;get height(){return this._height}set height(e){this._height=e==null||isNaN(e)?xt:e}_height=xt;get width(){return this._width}set width(e){this._width=e==null||isNaN(e)?vt:e}_width=vt;startSeconds;endSeconds;suggestedQuality;playerVars;disableCookies=!1;loadApi;disablePlaceholder=!1;showBeforeIframeApiLoads=!1;placeholderButtonLabel;placeholderImageQuality;ready=new me;stateChange=this._getLazyEmitter("onStateChange");error=this._getLazyEmitter("onError");apiChange=this._getLazyEmitter("onApiChange");playbackQualityChange=this._getLazyEmitter("onPlaybackQualityChange");playbackRateChange=this._getLazyEmitter("onPlaybackRateChange");youtubeContainer;constructor(){let e=o(We),r=o(Nr,{optional:!0});this.loadApi=r?.loadApi??!0,this.disablePlaceholder=!!r?.disablePlaceholder,this.placeholderButtonLabel=r?.placeholderButtonLabel||"Play video",this.placeholderImageQuality=r?.placeholderImageQuality||"standard",this._isBrowser=tt(e)}ngAfterViewInit(){this._conditionallyLoad()}ngOnChanges(e){this._shouldRecreatePlayer(e)?this._conditionallyLoad():this._player&&((e.width||e.height)&&this._setSize(),e.suggestedQuality&&this._setQuality(),(e.startSeconds||e.endSeconds||e.suggestedQuality)&&this._cuePlayer())}ngOnDestroy(){this._pendingPlayer?.destroy(),this._player&&(this._player.destroy(),window.onYouTubeIframeAPIReady=this._existingApiReadyCallback),this._playerChanges.complete(),this._destroyed.next(),this._destroyed.complete()}playVideo(){this._player?this._player.playVideo():(this._getPendingState().playbackState=y.PLAYING,this._load(!0))}pauseVideo(){this._player?this._player.pauseVideo():this._getPendingState().playbackState=y.PAUSED}stopVideo(){this._player?this._player.stopVideo():this._getPendingState().playbackState=y.CUED}seekTo(e,r){this._player?this._player.seekTo(e,r):this._getPendingState().seek={seconds:e,allowSeekAhead:r}}mute(){this._player?this._player.mute():this._getPendingState().muted=!0}unMute(){this._player?this._player.unMute():this._getPendingState().muted=!1}isMuted(){return this._player?this._player.isMuted():this._pendingPlayerState?!!this._pendingPlayerState.muted:!1}setVolume(e){this._player?this._player.setVolume(e):this._getPendingState().volume=e}getVolume(){return this._player?this._player.getVolume():this._pendingPlayerState&&this._pendingPlayerState.volume!=null?this._pendingPlayerState.volume:0}setPlaybackRate(e){if(this._player)return this._player.setPlaybackRate(e);this._getPendingState().playbackRate=e}getPlaybackRate(){return this._player?this._player.getPlaybackRate():this._pendingPlayerState&&this._pendingPlayerState.playbackRate!=null?this._pendingPlayerState.playbackRate:0}getAvailablePlaybackRates(){return this._player?this._player.getAvailablePlaybackRates():[]}getVideoLoadedFraction(){return this._player?this._player.getVideoLoadedFraction():0}getPlayerState(){if(!(!this._isBrowser||!window.YT))return this._player?this._player.getPlayerState():this._pendingPlayerState&&this._pendingPlayerState.playbackState!=null?this._pendingPlayerState.playbackState:y.UNSTARTED}getCurrentTime(){return this._player?this._player.getCurrentTime():this._pendingPlayerState&&this._pendingPlayerState.seek?this._pendingPlayerState.seek.seconds:0}getPlaybackQuality(){return this._player?this._player.getPlaybackQuality():"default"}getAvailableQualityLevels(){return this._player?this._player.getAvailableQualityLevels():[]}getDuration(){return this._player?this._player.getDuration():0}getVideoUrl(){return this._player?this._player.getVideoUrl():""}getVideoEmbedCode(){return this._player?this._player.getVideoEmbedCode():""}requestFullscreen(e){return oe(this,null,function*(){let r=this._elementRef.nativeElement;return r.requestFullscreen?r.requestFullscreen(e):Promise.reject(new Error("Fullscreen API not supported by browser."))})}_load(e){this._isBrowser&&(!window.YT||!window.YT.Player?(this.loadApi?(this._isLoading=!0,Rr(this._nonce)):this.showBeforeIframeApiLoads,this._existingApiReadyCallback=window.onYouTubeIframeAPIReady,window.onYouTubeIframeAPIReady=()=>{this._existingApiReadyCallback?.(),this._ngZone.run(()=>this._createPlayer(e))}):this._createPlayer(e))}_conditionallyLoad(){this._shouldShowPlaceholder()?this.playerVars?.autoplay===1&&this._load(!0):this._load(!1)}_shouldShowPlaceholder(){return this.disablePlaceholder?!1:this._isBrowser?this._hasPlaceholder&&!!this.videoId&&!this._player:!0}_getPendingState(){return this._pendingPlayerState||(this._pendingPlayerState={}),this._pendingPlayerState}_shouldRecreatePlayer(e){let r=e.videoId||e.playerVars||e.disableCookies||e.disablePlaceholder;return!!r&&!r.isFirstChange()}_createPlayer(e){if(this._player?.destroy(),this._pendingPlayer?.destroy(),typeof YT>"u"||!this.videoId&&!this.playerVars?.list)return;let r={host:this.disableCookies?"https://www.youtube-nocookie.com":void 0,width:this.width,height:this.height,playerVars:e?Q(X({},this.playerVars||{}),{autoplay:1}):this.playerVars};this.videoId&&(r.videoId=this.videoId);let n=this._ngZone.runOutsideAngular(()=>new YT.Player(this.youtubeContainer.nativeElement,r)),l=x=>{this._ngZone.run(()=>{this._isLoading=!1,this._hasPlaceholder=!1,this._player=n,this._pendingPlayer=void 0,n.removeEventListener("onReady",l),this._playerChanges.next(n),this.ready.emit(x),this._setSize(),this._setQuality(),this._pendingPlayerState&&(this._applyPendingPlayerState(n,this._pendingPlayerState),this._pendingPlayerState=void 0);let E=n.getPlayerState();E===y.UNSTARTED||E===y.CUED||E==null?this._cuePlayer():e&&this.startSeconds&&this.startSeconds>0&&n.seekTo(this.startSeconds,!0),this._changeDetectorRef.markForCheck()})};this._pendingPlayer=n,n.addEventListener("onReady",l)}_applyPendingPlayerState(e,r){let{playbackState:n,playbackRate:l,volume:x,muted:E,seek:G}=r;switch(n){case y.PLAYING:e.playVideo();break;case y.PAUSED:e.pauseVideo();break;case y.CUED:e.stopVideo();break}l!=null&&e.setPlaybackRate(l),x!=null&&e.setVolume(x),E!=null&&(E?e.mute():e.unMute()),G!=null&&e.seekTo(G.seconds,G.allowSeekAhead)}_cuePlayer(){this._player&&this.videoId&&this._player.cueVideoById({videoId:this.videoId,startSeconds:this.startSeconds,endSeconds:this.endSeconds,suggestedQuality:this.suggestedQuality})}_setSize(){this._player?.setSize(this.width,this.height)}_setQuality(){this._player&&this.suggestedQuality&&this._player.setPlaybackQuality(this.suggestedQuality)}_getLazyEmitter(e){return this._playerChanges.pipe(ce(r=>r?Fe(n=>{r.addEventListener(e,n)},n=>{try{r?.removeEventListener?.(e,n)}catch{}}):Z()),r=>new Me(n=>r.subscribe({next:l=>this._ngZone.run(()=>n.next(l)),error:l=>n.error(l),complete:()=>n.complete()})),Ve(this._destroyed))}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=h({type:t,selectors:[["youtube-player"]],viewQuery:function(r,n){if(r&1&&Qe(Tr,7),r&2){let l;Ze(l=qe())&&(n.youtubeContainer=l.first)}},inputs:{videoId:"videoId",height:[2,"height","height",M],width:[2,"width","width",M],startSeconds:[2,"startSeconds","startSeconds",Ct],endSeconds:[2,"endSeconds","endSeconds",Ct],suggestedQuality:"suggestedQuality",playerVars:"playerVars",disableCookies:[2,"disableCookies","disableCookies",ee],loadApi:[2,"loadApi","loadApi",ee],disablePlaceholder:[2,"disablePlaceholder","disablePlaceholder",ee],showBeforeIframeApiLoads:[2,"showBeforeIframeApiLoads","showBeforeIframeApiLoads",ee],placeholderButtonLabel:"placeholderButtonLabel",placeholderImageQuality:"placeholderImageQuality"},outputs:{ready:"ready",stateChange:"stateChange",error:"error",apiChange:"apiChange",playbackQualityChange:"playbackQualityChange",playbackRateChange:"playbackRateChange"},features:[je],decls:4,vars:3,consts:[["youtubeContainer",""],[3,"videoId","width","height","isLoading","buttonLabel","quality"],[3,"click","videoId","width","height","isLoading","buttonLabel","quality"]],template:function(r,n){r&1&&(m(0,Ar,1,6,"youtube-player-placeholder",1),c(1,"div"),he(2,"div",null,0),s()),r&2&&(p(n._shouldShowPlaceholder()?0:-1),a(),$("display",n._shouldShowPlaceholder()?"none":""))},dependencies:[Ir],styles:[`youtube-player:fullscreen,youtube-player:fullscreen iframe{min-width:100vw;min-height:100vh}
`],encapsulation:2,changeDetection:0})}return t})(),Le=!1;function Rr(t){if(Le)return;let i=De`https://www.youtube.com/iframe_api`,e=document.createElement("script"),r=n=>{e.removeEventListener("load",r),e.removeEventListener("error",r),n.type==="error"&&(Le=!1)};e.addEventListener("load",r),e.addEventListener("error",r),Pe(e,i),e.async=!0,t&&e.setAttribute("nonce",t),Le=!0,document.body.appendChild(e)}var Tt=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=P({type:t});static \u0275inj=C({})}return t})();function Dr(t,i){t&1&&d(0," V\xEDdeo n\xE3o encontrado. ")}function kr(t,i){if(t&1){let e=A();c(0,"h2"),d(1),s(),c(2,"youtube-player",1),b("stateChange",function(n){_(e);let l=f();return S(l.onStateChange(n))}),s(),c(3,"button",2),b("click",function(){_(e);let n=f();return S(n.goBack())}),d(4,"Voltar \xE0 playlist"),s()}if(t&2){let e=f();a(),I(e.title()),a(),w("videoId",e.youtubeId())}}var Te=class t{route=o(ye);router=o(W);dataService=o(N);persistence=o(Y);profileService=o(Ee);youtubeId=O(void 0);title=O(void 0);playlistId;videoId;subs=new H;ngOnInit(){this.playlistId=this.route.snapshot.paramMap.get("playlistId")||void 0,this.videoId=this.route.snapshot.paramMap.get("videoId")||void 0,!(!this.playlistId||!this.videoId)&&this.subs.add(this.dataService.getPlaylistById(this.playlistId).subscribe(i=>{if(!i)return;let e=i.modules?.flatMap(r=>r.lessons||[]).find(r=>r.id===this.videoId);e&&(this.youtubeId.set(e.youtubeId),this.title.set(e.title))}))}onStateChange(i){if(i?.data===0){let e=this.profileService.currentProfile;e&&this.videoId&&this.persistence.markAsWatched(e.id,this.videoId).catch(()=>{})}}goBack(){this.playlistId&&this.router.navigate(["/playlists",this.playlistId])}ngOnDestroy(){this.subs.unsubscribe()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=h({type:t,selectors:[["app-video"]],decls:3,vars:2,consts:[[1,"video"],[3,"stateChange","videoId"],[3,"click"]],template:function(e,r){e&1&&(c(0,"div",0),m(1,Dr,1,0),m(2,kr,5,2),s()),e&2&&(a(),p(r.youtubeId()?-1:1),a(),p(r.youtubeId()?2:-1))},dependencies:[j,Tt,Pt],styles:[".video[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:12px}.video[_ngcontent-%COMP%]   youtube-player[_ngcontent-%COMP%]{display:block;width:100%;aspect-ratio:16/9}"]})};var At=[{path:"",component:_e},{path:"playlists/:id",component:Se},{path:"playlists/:playlistId/videos/:videoId",component:Te}];var It=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=P({type:t});static \u0275inj=C({imports:[U.forChild(At),U]})};export{It as PlaylistsModule};
